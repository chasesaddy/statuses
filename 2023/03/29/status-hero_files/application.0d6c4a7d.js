var pt=Object.defineProperty;var gt=(s,t,e)=>t in s?pt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var o=(s,t,e)=>(gt(s,typeof t!="symbol"?t+"":t,e),e);import{c as y,n as T,d as j,a as J,b as Q,s as ft,e as p,_ as Z,f as k,g as bt}from"./time_zone.b77b042f.js";import"./time-elements.bfd02d04.js";import{h as v}from"./moment.fbc5633a.js";import{C as d,A as _t}from"./stimulus.15ac7bbc.js";import{i as vt,u as yt}from"./hotkey.28465e6d.js";import{T as O}from"./high_chart_element.abc7c28f.js";import{r as Tt}from"./stimulus-vite-helpers.401cf46a.js";import{C as wt}from"./clipboard.1aa8395c.js";import{C as P}from"./js-cookie.6bf34d0f.js";import"./colcade.b41fba8b.js";import"./mark.1c418417.js";import"./include-fragment-element.2189660f.js";import"./details-dialog-element.bc985f20.js";import"./details-menu-element.50b4d1fe.js";import{h as $t}from"./fzy.2647d855.js";import{s as Ct,r as kt,p as St}from"./session-resume.acddb85e.js";import"./jquery.7ce7b48f.js";import"./jstz.b5e5edd1.js";import"./popper.269b18c5.js";function _(s,t,e){return Object.defineProperty(s,t,{value:e})[t]}class Et{get env(){return _(this,"env",Y("env"))}get user(){return _(this,"user",E("user"))}get account(){return _(this,"account",E("account"))}get team(){return _(this,"team",E("team"))}get membership(){return _(this,"membership",E("membership"))}}const w=new Et;function E(s){const t=Y(s);return t?JSON.parse(t):{}}function Y(s){var t;return(t=document.querySelector(`meta[name="current-${s}"]`))==null?void 0:t.content}function xt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function V(s){const t={two_words_connector:" and ",words_connector:", ",last_word_connector:", and "};switch(s.length){case 0:return"";case 1:return s[0]+"";case 2:return`${s[0]}${t.two_words_connector}${s[1]}`;default:return`${s.slice(0,-1).join(t.words_connector)}${t.last_word_connector}${s.slice(-1)}`}}function At(s){const[,t,e]=s.match(/^\/(.+)\/(\w*)$/);return new RegExp(t,e)}function x(s=""){return s.match(/[^\s]+/g)||[]}window.moment=v;class X extends d{toggle(t){t.preventDefault();const e=t.target;e.classList.contains("past")||(e.classList.remove("x-pop"),e.classList.contains("selected")?(e.classList.remove("selected"),this.removeAbsence(e.dataset.date),this.notifyUser(e.dataset.date,!1)):(e.classList.add("x-pop"),e.classList.add("selected"),this.addAbsence(e.dataset.date),this.notifyUser(e.dataset.date)))}addAbsence(t){const e={method:"post",headers:{"X-CSRF-Token":y(),"Content-Type":"application/json"},body:JSON.stringify({date:t})};fetch(this.data.get("path"),e)}notifyUser(t,e=!0){let i=document.getElementById(this.data.get("responseElId")),n=document.createElement("div");e?n.classList.add("bg-success-50","text-success-600","dark:bg-success-400/[.15]","dark:text-success-300"):n.classList.add("bg-info-50","text-info-600","dark:bg-info-400/[.15]","dark:text-info-300"),this.hasAlertClass&&n.classList.add(...Ot(this.alertClass)),n.innerHTML=`<p class="mb-0">${this.notifyUserMessage(t,e)}</p>`,i.innerHTML="",i.appendChild(n)}notifyUserMessage(t,e=!0){let i=v(t).isSame(v(),"day")?`Today, ${v(t).format("dddd, MMMM D")}`:v(t).format("dddd, MMMM D, YYYY");return this.data.get("kind")=="preferences"?e?`${i}, added as a planned absence. You won't be prompted for a check-in.`:`${i}, removed as a planned absence.`:this.data.get("kind")=="team"?e?`${i}, added as a team holiday. Check-ins won't be collected.`:`${i}, removed as a team holiday.`:e?`${i}, added as a planned absence for ${this.data.get("kind")}. They won't be prompted for a check-in.`:`${i}, removed as a planned absence for ${this.data.get("kind")}.`}removeAbsence(t){const e={method:"delete",headers:{"X-CSRF-Token":y()},body:JSON.stringify({date:t})};fetch(`${this.data.get("path")}/${t}`,e)}}o(X,"classes",["alert"]);function Ot(s=""){return s.match(/[^\s]+/g)||[]}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));class G extends d{constructor(){super(...arguments);o(this,"churnkeyHandlers",{handleSupportRequest:()=>{this.supportButton.click(),window.churnkey.hide()},handleCancel:()=>new Promise((e,i)=>{const{action:n,method:l}=this.formElement,r=new FormData(this.formElement);fetch(n,{method:l,body:r}).then(a=>{a.ok?e({}):i({})})}),onGoToAccount:({canceled:e})=>{e&&(window.location=this.afterCancelUrlValue)}})}initialize(){if(!this.formElement)throw Error("Controller must be placed on a form input");if(!this.supportButton)throw Error("Missing support button")}intercept(e){window.churnkey&&(e.preventDefault(),window.churnkey.init("show",{...this.churnkeyHandlers,...this.paramsValue}))}get formElement(){return this.element.form}get supportButton(){return document.getElementById("launch-support-button")}}o(G,"values",{params:Object,afterCancelUrl:String});const jt=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));class D extends d{submitByKeyboard(t){t.key=="Enter"&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.submitTarget.click())}showLoadingState(t){t.currentTarget.classList.add(this.loadingClass)}async replaceWithResponse(t){const{response:e}=t.detail;await T(),this.element.outerHTML=await e.text()}}o(D,"targets",["submit"]),o(D,"classes",["loading"]);const Mt=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));class tt extends d{initialize(){this.update()}update(t){if(this.selectedValue=="custom")this.customInputsTarget.hidden=!1,t&&this.startInputTarget.focus();else{const[e,i]=this.selectedValue.split("..");this.startInputTarget.value=e,this.endInputTarget.value=i,this.customInputsTarget.hidden=!0}}get selectedValue(){return this.selectedOption.value}get selectedOption(){return this.selectTarget.options[this.selectTarget.selectedIndex]}}o(tt,"targets",["select","customInputs","startInput","endInput"]);const Pt=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));class et extends d{show(){this.fieldTarget.classList.remove("hidden")}hide(){this.fieldTarget.classList.add("hidden")}}o(et,"targets",["field"]);const Dt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));class I extends d{update(){const t=new URL(this.urlValue),e=new FormData(this.element);["authenticity_token","goal[title]","goal[description]"].forEach(r=>e.delete(r));const n=new URLSearchParams(e),l=[t,n.toString()].join("?");fetch(l).then(r=>r.text()).then(r=>{var a=new DOMParser,c=a.parseFromString(r,"text/html");const u=c.getElementById("goal-summary"),h=this.goalSummaryTarget;h.innerHTML=u.innerHTML})}}o(I,"targets",["goalSummary"]),o(I,"values",{url:String});const It=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));class zt extends d{connect(){vt(this.element)}disconnect(){yt(this.element)}}const Ht=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),M="reminder summary insights".split(" ");class z extends d{initialize(){this.updateSummaries()}update(){this.updateInputs(),this.updateSummaries()}enforceStep({target:t}){const[e,i]=t.value.split(":").map(Number),n=Number(t.step)/60,l=i%n;l&&(t.value=Rt(e,i-l),j(t))}updateInputs(){for(const t of M){const[e]=this[`${t}TimeControlTargets`],[i]=this[`${t}NextDayControlTargets`];if(e){let n=Number(e.value.replace(":",""));i!=null&&i.checked&&(n+=2400),this[`${t}TimeInputTarget`].value=n}}}updateSummaries(){const{timeZone:t}=this;for(const e of M){const[i]=this[`${e}TimeControlTargets`],[n]=this[`${e}DayControlTargets`],[l]=this[`${e}NextDayControlTargets`];if(i){const r=Ft(i.value);for(const a of this[`${e}TimeTargets`])a.textContent=`${r} (${t})`}if(n){const[r]=n.selectedOptions;for(const a of this[`${e}DayTargets`])a.textContent=r.label}if(l){const r=l.checked;for(const a of this[`${e}NextDayTargets`])a.hidden=!r}}}get timeZone(){return qt(this.hasTimeZoneControlTarget?this.timeZoneControlTarget.value:this.timeZoneValue)}}o(z,"targets",[...M.flatMap(t=>[`${t}Time`,`${t}TimeInput`,`${t}TimeControl`,`${t}Day`,`${t}DayControl`,`${t}NextDay`,`${t}NextDayControl`]),"timeZoneControl"]),o(z,"values",{timeZone:String});function Rt(s,t){const e=`${s}`.padStart(2,"0"),i=`${t}`.padStart(2,"0");return`${e}:${i}`}function Ft(s,t={hour:"numeric",minute:"numeric"}){return new Date(`${new Date().toDateString()} ${s}`).toLocaleTimeString([],t)}function qt(s){return s.replace(/\(.+\)$/g,"").trim()}const Bt=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));class H extends d{initialize(){this.update()}async update(){const t=await this.getScore();this.hintTarget.hidden=t>0,this.weakTarget.hidden=t<1||t>=this.minScoreValue,this.strongTarget.hidden=t<this.minScoreValue}async getScore(){return this.password.length<this.minLengthValue?0:(await(await fetch(this.scoresUrlValue,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":y()},body:JSON.stringify({password:this.password})})).json()).score}get password(){return this.inputTarget.value}}o(H,"targets",["input","hint","weak","strong"]),o(H,"values",{minLength:Number,minScore:Number,scoresUrl:String});const Vt=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),N="completion mood".split(" "),K="previous previousCompleted next blockers mood".split(" ");class R extends d{initialize(){this.update()}async update(){if(!this.updating){this.updating=!0,await J(),await T();for(const t of N){const e=this[`${t}TrackingInputTarget`],i=!e.checked||e.matches(":disabled");for(const n of this[`${t}TrackingContentTargets`])n.hidden=i}for(const t of K)this[`${t}QuestionPreviewTarget`].textContent=this.interpolate(this[`${t}QuestionInputTarget`]),this[`${t}LabelPreviewTarget`].textContent=this.interpolate(this[`${t}LabelInputTarget`]);this.updating=!1}}restoreDefaults(){for(const t of this.inputTargets)t.value=t.getAttribute("data-default-value");this.update()}get interpolate(){const{previous:t,next:e,next_for_question:i}=this.substitutionsValue;return _(this,"interpolate",n=>n.value.replace(/%\{previous_period\}/gi,t).replace(/%\{next_period\}/gi,n.getAttribute("name").match(/\[next_question\]/)?i:e))}}o(R,"targets",["input",...N.flatMap(t=>[`${t}TrackingInput`,`${t}TrackingContent`]),...K.flatMap(t=>[`${t}QuestionInput`,`${t}QuestionPreview`,`${t}LabelInput`,`${t}LabelPreview`])]),o(R,"values",{substitutions:Object});const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));class st extends d{connect(){this.update()}clamp(t){return Math.min(Math.max(t,3),97)}switch(){const t=this.selectTarget.value;let e;t==60?e="sh-goal-status-warning":t==30?e="sh-goal-status-danger":e="sh-goal-status-ok",this.element.classList.contains(e)||(this.element.classList.remove("sh-goal-status-ok","sh-goal-status-warning","sh-goal-status-danger"),this.element.classList.add(e))}update(){const t=this.inputTarget.value,e=this.clamp(t);this.outputTarget.innerHTML=`${t}%`,this.barTarget.style.width=`${e}%`}}o(st,"targets",["select","input","output","bar"]);const Nt=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"}));class F extends d{initialize(){this.installTooltips()}showLoadingState(){this.element.classList.add(this.loadingClass),this.menuTarget.open=!1}async replaceWithResponse(t){const{response:e}=t.detail;await T(),this.element.outerHTML=await e.text()}installTooltips(){for(const t of this.tooltipTargets){const i=JSON.parse(t.getAttribute("data-users")).map((n,l)=>n.id==w.user.id?l?"you":"You":n.first_name);t.title=V(i),O.install(t)}}}o(F,"targets",["menu","tooltip"]),o(F,"classes",["loading"]);const Kt=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));class it extends d{async initialize(){await T(),this.indicatorTarget.hidden=!this.hasHiddenContent}expand(){this.contentTarget.style.maxHeight="none",this.indicatorTarget.hidden=!0}get hasHiddenContent(){return this.contentTarget.scrollHeight>this.contentTarget.clientHeight}}o(it,"targets",["indicator","content"]);const Wt=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"}));class nt extends d{updateIcons(){this.iconContainerElement.innerHTML=this.iconHtml}get iconContainerElement(){return document.getElementById(this.iconContainerIdValue)}get iconHtml(){return this.selectedOption.getAttribute("data-reminder-icon-html")}get selectedOption(){return this.element.options[this.element.selectedIndex]}}o(nt,"values",{iconContainerId:String});const Jt=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"}));class ot extends d{initialize(){this.updateSummary()}ensureSelectedDay(t){this.days.length||(t.target.checked=!0)}updateSummary(){this.summaryTarget.textContent=this.summary}get summary(){const{days:t}=this;return t.length==7?"day":t.length==5&&t.every(Qt)?"weekday":V(t.map(xt))}get days(){return this.inputTargets.filter(t=>t.checked).map(t=>t.value)}}o(ot,"targets",["input","summary"]);function Qt(s){return!s.toLowerCase().startsWith("s")}const Zt=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));class q extends d{togglePreviousCompletedStatuses(){this.hasStatusTarget&&(this.toggleClass(this.statusTargets,"previousCompleted",...x(this.previousCompletedClass)),this.removeClass(this.statusTargets,"blocked",this.blockedClass),this.removeClass(this.statusTargets,"mood",this.moodClass))}toggleBlockedStatuses(){this.hasStatusTarget&&(this.toggleClass(this.statusTargets,"blocked",...x(this.blockedClass)),this.removeClass(this.statusTargets,"previousCompleted",this.previousCompletedClass),this.removeClass(this.statusTargets,"mood",this.moodClass))}toggleMoodStatuses(){this.hasStatusTarget&&(this.toggleClass(this.statusTargets,"mood",...x(this.moodClass)),this.removeClass(this.statusTargets,"previousCompleted",this.previousCompletedClass),this.removeClass(this.statusTargets,"blocked",this.blockedClass))}toggleClass(t,e,...i){for(const n of t)n.dataset[e]&&i.map(r=>n.classList.toggle(r))}removeClass(t,e,i){for(const n of t)n.dataset[e]&&n.classList.remove(...x(i))}}o(q,"targets",["previousCompleted","blocked","mood","status"]),o(q,"classes",["previousCompleted","blocked","mood"]);const Yt=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));class B extends d{disconnect(){this.stop()}update(){this.toggleFillButton(),this.scheduleAutosave()}stop(){this.cancelAutosave()}fillPrevious(){this.hasPreviousInput||(this.hasPreviousCompletedInputTarget&&(this.previousCompletedInputTarget.checked=!0),W(this.previousInputTarget,{value:this.intentionsValue}))}fillPreviousIfCompleted(){this.previousCompletedInputTarget.checked&&this.fillPrevious(),this.toggleCompletedSectionDataAttribute()}toggleCompletedSectionDataAttribute(){this.hasPreviousCompletedSectionTarget&&(this.previousCompletedSectionTarget.dataset.completed=this.previousCompletedInputTarget.checked)}toggleFormattingHelp(t){t.preventDefault(),document.getElementById("toggle-formatting-help").open=!0}async uncheckMood(t){const{control:e}=t.currentTarget;e.checked&&(await Q(),W(e,{checked:!1}))}removeAttachment(t){t.preventDefault();const e=this.attachmentTargets.find(n=>n.contains(t.target)),{parentElement:i}=e;e.remove(),j(i)}submitByKeyboard(t){t.key=="Enter"&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.submitTarget.click())}toggleFillButton(){this.hasFillButtonContainerTarget&&(this.fillButtonContainerTarget.hidden=this.hasPreviousInput)}scheduleAutosave(){this.autosaveTimeout||(this.autosaveTimeout=setTimeout(async()=>{await this.autosave(),delete this.autosaveTimeout},10*1e3))}cancelAutosave(){clearTimeout(this.autosaveTimeout),delete this.autosaveTimeout}async autosave(){await fetch(this.autosaveUrl,{body:this.autosaveFormData,method:"put"})}get autosaveUrl(){return new URL(this.autosaveUrlValue,location)}get autosaveFormData(){const t=new FormData(this.element);for(const e of t.keys())e.includes("attachment")&&t.delete(e);return t}get hasPreviousInput(){return this.previousInputTarget.value.trim().length>0}}o(B,"targets",["attachment","attachmentList","fillButtonContainer","previousCompletedInput","previousCompletedSection","previousInput","submit"]),o(B,"values",{autosaveUrl:String,intentions:String});function W(s,t={}){Object.assign(s,t),j(s)}const Xt=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));class A extends d{initialize(){this.update()}update(){this.formData=new FormData(this.element),this.render()}async render(){if(this.rendering)return;this.rendering=!0,await J();const{previousCompleted:t,blocked:e,mood:i}=this,n=i?this.moodImage.outerHTML:"";await T(),this.previousCompletedSymbolTarget.hidden=!t,this.blockedSymbolTarget.hidden=!e,this.moodSymbolTarget.hidden=!i,this.moodSymbolTarget.innerHTML=n,this.rendering=!1}getAnswer(t){var e;return(e=this.formData.get(`answer_set[${t}]`))==null?void 0:e.trim()}getAnswers(t){return this.formData.getAll(`answer_set[${t}][]`)}get previousCompleted(){return this.getAnswer("previous_completed")=="1"}get blockers(){return this.getAnswer("blockers")}get blocked(){return this.blockers.length&&!this.blockerNegationPattern.test(ft(this.blockers))}get blockerNegationPattern(){return _(this,"blockerNegationPattern",At(this.negexValue))}get mood(){return this.getAnswer("mood")}get moodImage(){return this.moodImageTargets.find(t=>t.getAttribute("data-mood")==this.mood)}}o(A,"targets",["answer","attachment","attachments","attachmentList","attachmentTemplate","blockedSymbol","blockers","blockersAnswer","content","moodImage","moodSymbol","previousCompletedSymbol"]),o(A,"classes",["previousCompleted"]),o(A,"values",{attachmentAlert:String,negex:String});const Gt=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));class at extends d{initialize(){const t=Boolean(this.data.get("receive")),e=v(this.data.get("sent")),i=this.data.get("user-id"),n=w.user.id==i,l=w.membership.team_lead,r=t&&l&&v().diff(e,"hours")<48,a=n||l,c=t&&n;t?($(this.sentAtTarget).html(e.fromNow()),$(this.sentIconsTarget).removeClass("d-none hidden")):$(this.sentIconsTarget).remove(),r?$(this.resendButtonTarget).removeClass("d-none hidden"):$(this.resendButtonTarget).remove(),a?$(this.absentButtonTarget).removeClass("d-none hidden"):$(this.absentButtonTarget).remove(),c?$(this.checkinButtonTarget).removeClass("d-none hidden"):$(this.checkinButtonTarget).remove(),!r&&!a&&!c&&$(this.formTarget).remove()}sendReminder(t){t.preventDefault();const e=$(this.sentAtTarget),i=$(t.target);$(this.resendButtonTarget).fadeOut(500,function(){$(this).remove(),e.html("just now")}),$.post(i.attr("action"),i.serialize())}}o(at,"targets",["absentButton","checkinButton","form","resendButton","sentAt","sentIcons"]);const te=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"}));class rt extends d{initialize(){this.chatParam&&(this.chatParam==this.salesParamTarget.value?this.setPaneAttribute("sales"):this.setPaneAttribute("support"),this.paneTarget.open=!0)}launch(t){this.paneTarget.open=!0,window.HubSpotConversations?this.open(t):window.hsConversationsOnReady=[()=>this.open(t)],t&&t.preventDefault()}togglePane(t){t.target.open==!0&&this.launch()}submit(t){this.errorMessageTarget.hidden=!0,this.successMessageTarget.hidden=!0;const e=t.target,i=new FormData(e);fetch(e.action,{method:e.method,headers:{"X-CSRF-Token":y()},body:i}).then(n=>{if(n.ok)this.successMessageTarget.hidden=!1;else throw Error(n.statusText);e.reset()}).catch(()=>{this.errorMessageTarget.hidden=!1}),t.preventDefault()}clearFormMessages(){this.errorMessageTarget.hidden=!0,this.successMessageTarget.hidden=!0}get params(){return new URLSearchParams(window.location.search)}get chatParam(){return this.params.get(this.paramTarget.name)}setPaneAttribute(t){this.paneTarget.setAttribute("data-support-type",t)}replaceHistoryState(t,e){window.history.replaceState({},t,`?${t}=${e}`)}open(t){this.paneTarget.open=!0;const e=this.paneTarget.dataset.supportType;t?(t.currentTarget.dataset.supportType=="sales"?(this.replaceHistoryState(this.paramTarget.name,this.salesParamTarget.value),this.setPaneAttribute("sales")):t.currentTarget.dataset.supportType=="support"&&(this.replaceHistoryState(this.paramTarget.name,this.paramTarget.value),this.setPaneAttribute("support")),window.HubSpotConversations.widget.status().loaded&&t.currentTarget.dataset.supportType==e?this.openChat():window.HubSpotConversations.widget.status().loaded&&t.currentTarget.dataset.supportType!==e&&(this.clearFormMessages(),this.refreshChat())):window.HubSpotConversations.widget.status().loaded?this.openChat():this.loadChat()}loadChat(){fetch(this.visitorIdentificationUrlTarget.value,{method:"POST",headers:{"X-CSRF-Token":y()}}).then(t=>t.json()).then(t=>{window.hsConversationsSettings={...window.hsConversationsSettings,identificationEmail:this.emailTarget.value,identificationToken:t.token},window.HubSpotConversations.widget.load(),this.openChat()})}loadChatAndOpen(){this.paneTarget.open=!0,window.HubSpotConversations.widget.load({widgetOpen:!0})}openChat(){window.HubSpotConversations.widget.status().loaded||window.HubSpotConversations.widget.open()}refreshChat(){window.HubSpotConversations.widget.refresh({openToNewThread:!0})}handleChatClose(t){try{const e=JSON.parse(t.data);e&&e.type==="open-change"&&e.data.isOpen==!1&&(window.HubSpotConversations.widget.remove(),this.launch())}catch{return}}}o(rt,"targets",["param","salesParam","pane","loading","trigger","email","visitorIdentificationUrl","successMessage","errorMessage"]);const ee=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"}));class lt extends d{initialize(){this.showTab()}change(t){this.index=this.tabTargets.indexOf(t.currentTarget)}showTab(){this.tabTargets.forEach((t,e)=>{const i=this.panelTargets[e];e==this.index?t.setAttribute("aria-selected",!0):t.setAttribute("aria-selected",!1),e!=this.index?i.hidden=!0:i.hidden=!1})}get index(){return parseInt(this.data.get("index")||0)}set index(t){this.data.set("index",t),this.showTab()}}o(lt,"targets",["tab","panel"]);const se=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"}));class ie extends d{async replaceWithResponse(t){const{response:e}=t.detail;await T(),this.element.outerHTML=await e.text()}}const ne=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));class oe extends d{preview(){document.documentElement.setAttribute("data-theme",this.theme)}get theme(){return this.element.value||this.systemTheme}get systemTheme(){return matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}const ae=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),re=_t.start(),le=Object.assign({"../controllers/absences_controller.js":Lt,"../controllers/churnkey_controller.js":jt,"../controllers/comments_controller.js":Mt,"../controllers/date_range_controller.js":Pt,"../controllers/field_toggle_controller.js":Dt,"../controllers/goal_form_controller.js":It,"../controllers/hotkey_controller.js":Ht,"../controllers/notification_times_controller.js":Bt,"../controllers/password_strength_controller.js":Vt,"../controllers/questions_form_controller.js":Ut,"../controllers/range_display_controller.js":Nt,"../controllers/reactions_controller.js":Kt,"../controllers/read_more_controller.js":Wt,"../controllers/reminder_channel_select_controller.js":Jt,"../controllers/report_days_controller.js":Zt,"../controllers/reports_controller.js":Yt,"../controllers/status_form_controller.js":Xt,"../controllers/status_form_preview_controller.js":Gt,"../controllers/status_reminder_controller.js":te,"../controllers/support_controller.js":ee,"../controllers/tabs_controller.js":se,"../controllers/tags_controller.js":ne,"../controllers/theme_selection_controller.js":ae});Tt(re,le);const ce=["image/gif","image/jpeg","image/png"];$(document).on("change",".avatar-upload input[type='file']",function(){let s=$(this).parents(".avatar-upload").find("img.member-avatar"),t=$(this).parents(".avatar-upload").find(".help-block");const e=t.text();let i=new FileReader;i.onload=function(n){const l=n.target.result,r=l.split(",")[0].split(":")[1].split(";")[0];ce.includes(r)?(s.replaceWith($("<img />",{src:l,class:"member-avatar preview"})),t.html(e),t.removeClass("text-danger")):(t.html("Hrm. That's not an image file"),t.addClass("text-danger"),$(this).val(null))},i.readAsDataURL($(this)[0].files[0])});p(function(){new wt(".copy-button").on("success",({trigger:t})=>{O.install(t,{text:"Copied!"}).show(),setTimeout(()=>O.install(t),1e3)})});$(document).on("click",".card-header.toggle-card-body",function(s){s.preventDefault(),$(`#${$(this).data("target")}`).slideToggle()});$(document).on("click","button.test-integration",function(){$(this).parent().find("button.save-integration").hide(),$(this).parent().find("input[type=hidden].test-integration").val(1)});$(document).on("click","button.save-integration",function(){$(this).parent().find("button.test-integration").hide()});$(document).on("click",".insights a#toggle-status-card-table-view",function(s){s.preventDefault();const t=$("form#search-filter-statuses-form");let e=$("form#search-filter-statuses-form input[name=display]");e.val()==="list"?e.val("grid"):e.val("list"),t.submit()});$(document).on("click",".insights a.adjacent-period",function(s){s.preventDefault();const t=$("form#search-filter-statuses-form");let e=$("form#search-filter-statuses-form input[name=ds]"),i=$("form#search-filter-statuses-form input[name=de]");e.val($(this).data("ds")),i.val($(this).data("de")),t.submit()});p(function(){function s(t){t.next(".form-text.selected-items").remove();let e=t.find("option:selected").toArray().map(i=>i.innerHTML);e.length==0&&(e=["None"]),t.after(`<div class="form-text selected-items">Selected: ${V(e)}</div>`)}$("select.show-selections").each(function(){s($(this))}),$("select.show-selections").on("change",function(){s($(this))})});$(document).on("click","a#side-nav-toggle",function(s){s.preventDefault();let t=$("body.application");t.hasClass("nav-maximized")?(t.removeClass("nav-maximized"),P.set("_sthr_nav_exp","off")):(t.addClass("nav-maximized"),P.set("_sthr_nav_exp","on")),ct()});$(document).on("click","#top-nav-search-toggle > a",function(s){s.preventDefault(),$("#top-nav-search").toggleClass("d-none"),$("#top-nav-search-toggle").toggleClass("d-none"),$("#top-nav-search").find("input")[0].focus()});$("details#header-search").on("toggle",function(){$("#header-search-field")[0].focus()});function ct(){const t=P.get("_sthr_nav_exp")=="on"?"uninstall":"install",e=document.querySelectorAll("#side-nav [data-tooltip]");for(const i of e)O[t](i)}p(()=>setTimeout(ct));$(document).on("click",".onboarding-card > a",function(){const s=$(this).data("kind");s==="observers"&&($(this).parent().addClass("complete"),$.ajax({type:"PUT",url:`/team/onboarding_components/${s}`,dataType:"json",beforeSend(t){t.setRequestHeader("X-CSRF-Token",y())}}))});$(document).on("click",".onboarding .form-check.add-existing-member input[type=checkbox]",function(){const s=$(this);s.is(":checked")?(s.parent().append(`<input type='hidden' name='existing_members[][email]' value='${$(this).data("email")}' />`),s.data("first-name")&&s.data("first-name").length>0&&s.parent().append(`<input type='hidden' name='existing_members[][first_name]' value='${s.data("first-name")}' />`),s.data("last-name")&&s.data("last-name").length>0&&s.parent().append(`<input type='hidden' name='existing_members[][last_name]' value='${s.data("last-name")}' />`),s.data("time-zone")&&s.data("time-zone").length>0&&s.parent().append(`<input type='hidden' name='existing_members[][time_zone]' value='${s.data("time-zone")}' />`)):s.parent().find("input[type=hidden]").remove()});p(function(){return $(".onboarding a.member-form-add-row").click(function(){const s=$(".onboarding .member-form").first().clone();s.find("input").val(""),s.appendTo(".onboarding .member-forms"),s.find("input")[0].focus()}),$(".onboarding #options-keep-time-zone").click(function(){$(".onboarding .time-zone-selection").hide(),$(".onboarding .custom-radio.keep-time-zone").addClass("active"),$(".onboarding .custom-radio.change-time-zone").removeClass("active")}),$(".onboarding #options-change-time-zone").click(function(){$(".onboarding .time-zone-selection").show(),$(".onboarding .custom-radio.keep-time-zone").removeClass("active"),$(".onboarding .custom-radio.change-time-zone").addClass("active")}),$(".onboarding #options-keep-report-frequency").click(function(){$(".onboarding .report-frequency-selection").hide(),$(".onboarding .custom-radio.keep-report-frequency").addClass("active"),$(".onboarding .custom-radio.change-report-frequency").removeClass("active")}),$(".onboarding #options-change-report-frequency").click(function(){$(".onboarding .report-frequency-selection").show(),$(".onboarding .custom-radio.keep-report-frequency").removeClass("active"),$(".onboarding .custom-radio.change-report-frequency").addClass("active")}),$(".onboarding #options-keep-reminder-time").click(function(){$(".onboarding .reminder-time-selection").hide(),$(".onboarding .custom-radio.keep-reminder-time").addClass("active"),$(".onboarding .custom-radio.change-reminder-time").removeClass("active")}),$(".onboarding #options-change-reminder-time").click(function(){$(".onboarding .reminder-time-selection").show(),$(".onboarding .custom-radio.keep-reminder-time").removeClass("active"),$(".onboarding .custom-radio.change-reminder-time").addClass("active")})});p(async function(){const s=$(".report-charts .report-chart");if(!s.length)return;window.Snap||await Z(()=>import("./snapsvg.6edc83d6.js").then(a=>a.s),["assets/snapsvg.6edc83d6.js","assets/clipboard.1aa8395c.js"]);const t=function(a,c,u,h){const m=(h-90)*Math.PI/180;return[Math.round((a+u*Math.cos(m))*100)/100,Math.round((c+u*Math.sin(m))*100)/100]},e=function(a,c,u,h,m){const g=t(a,c,u,m),f=t(a,c,u,h);return`M ${g[0]} ${g[1]} A ${u} ${u} 0 0 0 ${f[0]} ${f[1]}`},i=function(a,c,u,h={}){if(a==null){u.html("--");return}const m=h.scale||100,g=h.suffix||"<small>%</small>",f=h.precision||0;let b=c.path("");Snap.animate(0,a,function(C){b.remove();const U=e(500,500,450,-90,C*180-90);b=c.path(U),b.attr({class:"data-arc",fill:"none",strokeWidth:75}),u.html((C*m).toFixed(f)+g)},Math.round(2e3*a),mina.easeinout)},n=function(a,c,u,h={}){if(a==null){u.html("--");return}const m=h.scale||100,g=h.suffix||"<small>%</small>",f=h.precision||0,b=c.rect(0,0,0,0);Snap.animate(0,a,function(C){b.remove(),c.rect(0,0,C*1e3,60).attr({class:"data-bar",stroke:"none"}),u.html((C*m).toFixed(f)+g)},Math.round(2e3*a),mina.easeinout)},l=function(a){let c=a.path("");const u=e(500,500,450,-90,90);c=a.path(u),c.attr({class:"bg-arc",fill:"none",strokeWidth:75})},r=function(a){a.rect(0,0,1e3,60).attr({class:"bg-bar",stroke:"none"})};s.each(function(){let a={};$(this).hasClass("mood")&&(a.scale=10,a.precision=1,a.suffix="<small>/10</small>");const c=$(this).data("mval"),u=$(this).data("cida"),h=$(this).data("cidb"),m=Snap(`#${u}`),g=Snap(`#${h}`),f=$(this).find("h3.percentage.arc"),b=$(this).find("h3.percentage.bar");l(m),r(g),i(c,m,f,a),n(c,g,b,a)})});class dt extends HTMLElement{constructor(){super();o(this,"update",()=>{this.value=this.content,this.empty=!this.value});o(this,"uploadStarted",()=>{this.uploadCount++,this.toggleSubmitters()});o(this,"uploadEnded",()=>{this.uploadCount--,this.toggleSubmitters()});this.input=k("textarea",{readonly:!0,tabIndex:-1,...this.takeAttributes("name","value","required")}),this.append(this.input),this.editorConfig={element:this,editorProps:{attributes:this.takeAttributes("placeholder")},autofocus:this.autofocus,onCreate:this.update,onUpdate:this.update},this.addEventListener("drop",e=>{const{files:i}=e.dataTransfer;i.length&&(e.preventDefault(),this.editor.chain().focus().insertFiles(i).run())}),this.addEventListener("keydown",e=>e.defaultPrevented&&j(e.target)),this.uploadCount=0,this.addEventListener("attachment:upload-start",this.uploadStarted),this.addEventListener("attachment:upload-end",this.uploadEnded)}async connectedCallback(){const{Editor:e}=await Z(()=>import("./editor.0644dae6.js"),["assets/editor.0644dae6.js","assets/core.3a61766e.js","assets/prosemirror-state.c62608fd.js","assets/prosemirror-model.bedf6be5.js","assets/prosemirror-transform.04817586.js","assets/prosemirror-view.2af25629.js","assets/prosemirror-keymap.66438f8c.js","assets/prosemirror-commands.c0842bd9.js","assets/prosemirror-schema-list.1780b0d2.js","assets/extension-blockquote.57ef3335.js","assets/extension-bold.7a4995dd.js","assets/extension-bullet-list.f2132edf.js","assets/extension-code.7b29f54c.js","assets/extension-code-block.495a289b.js","assets/extension-document.2fec78c6.js","assets/extension-dropcursor.252db604.js","assets/prosemirror-dropcursor.56bc89d0.js","assets/extension-gapcursor.b3566e54.js","assets/prosemirror-gapcursor.a8085ec3.js","assets/extension-hard-break.79502ab7.js","assets/extension-history.aef2e3f9.js","assets/prosemirror-history.80ab9250.js","assets/extension-horizontal-rule.e7a2e824.js","assets/extension-image.f9c66f55.js","assets/extension-italic.f96ec146.js","assets/extension-link.59ab2e5e.js","assets/extension-list-item.309210d5.js","assets/extension-ordered-list.a2f7d28e.js","assets/extension-paragraph.58f89ae5.js","assets/extension-strike.839b3e86.js","assets/extension-task-item.96b94f89.js","assets/extension-task-list.62dbbccb.js","assets/extension-text.97a7aff1.js","assets/time_zone.b77b042f.js","assets/jquery.7ce7b48f.js","assets/clipboard.1aa8395c.js","assets/time-elements.bfd02d04.js","assets/js-cookie.6bf34d0f.js","assets/jstz.b5e5edd1.js","assets/combobox-nav.73243ad9.js","assets/suggestion.a89ee8ba.js","assets/fzy.2647d855.js","assets/moment.fbc5633a.js","assets/stimulus.15ac7bbc.js","assets/hotkey.28465e6d.js","assets/high_chart_element.abc7c28f.js","assets/popper.269b18c5.js","assets/stimulus-vite-helpers.401cf46a.js","assets/colcade.b41fba8b.js","assets/mark.1c418417.js","assets/include-fragment-element.2189660f.js","assets/details-dialog-element.bc985f20.js","assets/details-menu-element.50b4d1fe.js","assets/session-resume.acddb85e.js"]);this.isConnected&&(this.editor=new e({content:this.value,...this.editorConfig}),this.dispatchEvent(new CustomEvent("ready")))}disconnectedCallback(){var e;(e=this.editor)==null||e.destroy()}focus(){this.editor.commands.focus()}takeAttribute(e){if(!this.hasAttribute(e))return;const i=this.getAttribute(e);return this.removeAttribute(e),i}takeAttributes(...e){const i={};for(const n of e){const l=this.takeAttribute(n);l&&(i[n]=l)}return i}toggleSubmitters(){for(const e of this.submitters)e.disabled=this.uploadCount>0}get submitters(){return[...this.form.querySelectorAll("[type=submit],button:not([type=button])")]}get form(){return this.input.form}get name(){return this.input.name}get value(){return this.input.value}set value(e){e!=this.value&&(this.input.value=e,this.editor&&e!=this.content&&this.editor.commands.setContent(e,{emitUpdate:!0}))}get content(){return this.editor.isEmpty?"":this.editor.getHTML()}get placeholder(){return this.editor.placeholder}set placeholder(e){this.editor.placeholder=e}get autofocus(){return this.hasAttribute("autofocus")}set autofocus(e){this.toggleAttribute("autofocus",e)}get empty(){return this.hasAttribute("empty")}set empty(e){this.toggleAttribute("empty",e)}get disabled(){return!1}get defaultValue(){return""}}Reflect.setPrototypeOf(dt.prototype,HTMLTextAreaElement.prototype);customElements.define("rich-text-area",dt);async function ut(s,t="rich-text-area"){await customElements.whenDefined(t);const e=s.closest(t);return new Promise(i=>{const n=()=>i(e.editor);if(e.editor)return n();e.addEventListener("ready",n,{once:!0})})}class de extends HTMLElement{constructor(){super();o(this,"handleClick",e=>{const i=e.target.closest("[data-command]");i&&(e.preventDefault(),this.perform(i.getAttribute("data-command")))});o(this,"handleKey",e=>{const i=this.keyHandlers[e.key];i&&i(e)});o(this,"keyHandlers",{Escape:()=>{this.hide()},Enter:e=>{e.preventDefault();const i=e.target.closest("[data-input][data-command]");i&&this.perform(i.getAttribute("data-command"))}});o(this,"handleViewportResize",()=>{this.visible&&this.updatePosition()});this.update=bt(this.update.bind(this),100)}async connectedCallback(){this.editor=await ut(this),this.isConnected&&(this.editor.on("transaction",this.update),this.addEventListener("mousedown",this.handleClick),this.addEventListener("keydown",this.handleKey),visualViewport.addEventListener("resize",this.handleViewportResize))}disconnectedCallback(){var e;(e=this.editor)==null||e.off("transaction",this.update),this.removeEventListener("mousedown",this.handleClick),this.removeEventListener("keydown",this.handleKey),visualViewport.removeEventListener("resize",this.handleViewportResize)}async update(){await T(),!this.isFocused&&(this.hide(),this.shouldShow&&(this.updateButtons(),this.updatePosition(),this.show()))}updateButtons(){for(const e of this.buttons){const i=e.getAttribute("data-name"),n=e.getAttribute("data-command");e.setAttribute("aria-pressed",i&&this.editor.isActive(i)),e.disabled=!this.canPerform(n)}}updatePosition(){const{selectionRect:e,offsetRect:i,style:n}=this,l=i.bottom-e.top;n.bottom=`${l}px`;const r=e.left-i.left+e.width/2;n.left=`${r}px`;const a=i.left-30,c=this.rect.left-a;c<0&&(n.left=`${r-c}px`)}show(){this.visible=!0}hide(){this.visible=!1,this.closeDialogs()}canPerform(e){return this.editor.can().chain().focus()[e]().run()}perform(e){typeof this[e]=="function"?this[e]():this.editor.chain().focus()[e]().run()}toggleLink(){this.openDialog("link");const e=this.getInput("link");e.value=this.editor.getAttributes("link").href||"",e.focus()}setLink(){const e=this.getInput("link").value;if(!e)return this.unsetLink();this.editor.chain().focus().extendMarkRange("link").setLink({href:e}).run(),this.closeDialog("link")}unsetLink(){this.editor.chain().focus().extendMarkRange("link").unsetLink().run(),this.closeDialog("link")}openDialog(e){this.getDialog(e).open=!0}closeDialog(e){this.getDialog(e).open=!1}closeDialogs(){for(const e of this.dialogs)e.open=!1}getDialog(e){return this.querySelector(`[data-dialog="${e}"]`)}getInput(e){return this.querySelector(`[data-input="${e}"]`)}get buttons(){return[...this.querySelectorAll("[data-command]")]}get dialogs(){return[...this.querySelectorAll("[data-dialog]")]}get isFocused(){return this.contains(document.activeElement)}get shouldShow(){return this.editor.isFocused&&!this.selection.empty}get selection(){return this.editor.selection}get selectionRect(){return this.editor.selectionRect}get offsetRect(){return this.offsetParent.getBoundingClientRect()}get rect(){return this.getBoundingClientRect()}get visible(){return this.hasAttribute("visible")}set visible(e){this.toggleAttribute("visible",e)}}customElements.define("rich-text-toolbar",de);class ue extends HTMLElement{constructor(){super(...arguments);o(this,"handleClick",e=>{const i=e.target.closest("[data-command]");i&&this.perform(i.getAttribute("data-command"))})}async connectedCallback(){this.editor=await ut(this),this.isConnected&&this.addEventListener("click",this.handleClick)}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}perform(e){typeof this[e]=="function"&&this[e]()}async attachFiles(){const e=k("input",{type:"file",multiple:!0,hidden:!0});e.onchange=()=>this.insertFiles(e.files),this.append(e),e.click(),await Q(),e.remove()}insertFiles(e){this.editor.chain().focus().insertFiles(e).run()}}customElements.define("rich-text-actionbar",ue);class L extends HTMLElement{constructor(){super(),this.render=he(this.render.bind(this))}attributeChangedCallback(t,e,i){e!=i&&this.update()}connectedCallback(){this.update()}update(){this.isEditable&&(this.type=me(this.contentType)?"image":"file",this.render())}render(){const t=this.querySelector("a")||k("a");if(t.href=this.url,this.type=="image"){const e=t.querySelector("img")||k("img"),i=this.previewUrl||this.url;i!=e.src&&(e.src=i),this.width&&(e.width=this.width),this.height&&(e.height=this.height),e.isConnected||t.replaceChildren(e)}else{t.download=this.filename;const e=t.querySelector("span")||k("span");e.textContent=this.filename,e.isConnected||t.replaceChildren(e)}t.isConnected||this.append(t)}setAttribute(t,e){e?super.setAttribute(t,e):this.removeAttribute(t)}get sgid(){return this.getAttribute("sgid")}set sgid(t){this.setAttribute("sgid",t)}get contentType(){return this.getAttribute("content-type")}set contentType(t){this.setAttribute("content-type",t)}get url(){return this.getAttribute("url")}set url(t){this.setAttribute("url",t)}get previewUrl(){return this.getAttribute("preview-url")}set previewUrl(t){this.setAttribute("preview-url",t)}get filename(){return this.getAttribute("filename")}set filename(t){this.setAttribute("filename",t)}get width(){return this.getAttribute("width")}set width(t){this.setAttribute("width",t)}get height(){return this.getAttribute("height")}set height(t){this.setAttribute("height",t)}get type(){return this.getAttribute("type")}set type(t){this.setAttribute("type",t)}get isEditable(){return this.isConnected&&this.hasAttribute("contenteditable")}}o(L,"tagName","rich-text-attachment"),o(L,"observedAttributes","content-type filename height preview-url sgid type url width".split(" "));function he(s){let t;return(...e)=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>s(...e))}}function me(s){return/^image(\/(gif|png|jpe?g)|$)/.test(s)}customElements.define(L.tagName,L);p(function(){$(".status-grid-item").animate({opacity:1},500)});p(function(){const s=$("#searched-statuses");if(s.data("term")&&s.data("term").length){const t=s.data("term");s.mark(t)}$("#page-search input").on("input",function(){const t=$(this).val().trim(),e=new RegExp(t,"gi");$(".page-search-result").each(function(){$(this).data("search").trim().match(e)?$(this).show():$(this).hide()})})});p(function(){const s=$("#integrations_configuration_slack_broadcast_checkins"),t=$("#integrations_configuration_slack_thread_checkins"),e=$("fieldset.integrations_configuration_slack_broadcast_summary");e.show(),t.is(":checked")&&e.hide(),s.is(":checked")||(e.show(),$(".depends-on-broadcast-checkins").hide()),t.change(function(){e.slideToggle("fast")}),s.change(function(){$(".depends-on-broadcast-checkins").slideToggle("fast"),$(this).is(":checked")||e.show()})});p(function(){let s;$("a.toggle-api-key").click(function(){$(this).hide(),$(".api-key .code").show()});const t=document.getElementById("member-absences");t&&t.addEventListener("details-dialog-close",()=>location.reload());const e=$(".team-settings #member_state"),i=$(".team-settings #member_observer_mode"),n=$("#team_completion_tracking"),l=$("#team_mood_tracking");e.change(function(){const r=$(this);r.val().match(/inactive/)?($(".team-settings .notification-selections").addClass("d-none hidden"),$(".team-settings .badge-inactive").removeClass("d-none hidden")):($(".team-settings .notification-selections").removeClass("d-none hidden"),$(".team-settings .badge-inactive").addClass("d-none hidden")),r.val().match(/observer/)?(s(!0),$(".team-settings .badge-observer").removeClass("d-none hidden")):(s(!1),$(".team-settings .badge-observer").addClass("d-none hidden"))}),i.change(function(){const r=$(this);s(r.is(":checked"))}),s=function(r){let a=$("#member_receive_reminders").prop("checked");r?($("#member_reminder_time").prop("readonly",!0),$("#member_preferred_reminder_channel").prop("disabled",!0),$("#member_receive_reminders").prop("disabled",!0),console.log(a),a=!!$("#member_receive_reminders").prop("checked"),console.log(a),$("#member_receive_reminders").prop("checked",!1),console.log(a)):($("#member_reminder_time").prop("readonly",!1),$("#member_receive_reminders").prop("disabled",!1),$("#member_receive_reminders").prop("checked",a),$("#member_preferred_reminder_channel").prop("disabled",!1))},n.change(function(){$(".previous-completed-chart-toggle").toggleClass("d-none hidden")}),l.change(function(){$(".mood-chart-toggle").toggleClass("d-none hidden")})});const ht=function(){window.location=`/teams/${w.team.slug}/trello_connection/error`},pe=function(){window.Trello.get("/members/me/boards",ge,ht)},ge=function(s){const t={};s.forEach(e=>{!e.closed&&e.prefs.permissionLevel!=="private"&&(t[e.id]={url:e.url,name:e.name})}),fetch(`/teams/${w.team.slug}/trello_connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authenticity_token:y(),token:window.Trello.token(),boards:t}),redirect:"follow"}).then(e=>{window.location=e.url}).catch(function(){window.location=`/teams/${w.team.slug}/trello_connection/error`})},fe=()=>window.Trello.authorize({type:"popup",name:"Status Hero",expiration:"never",interactive:!0,error(){ht()},success(){pe()}});p(function(){const s=document.querySelector("a#add-trello");s&&s.addEventListener("click",function(t){fe(),t.preventDefault()})});addEventListener("toggle",be,{capture:!0});addEventListener("click",_e,{capture:!0});let S;function be({target:s}){const t=s.querySelector("details-menu");t&&(s.open?(S=s,ve(t)):S=null)}function _e({target:s}){S&&!S.contains(s)&&(S.open=!1)}function ve(s){requestAnimationFrame(()=>{const t=s.getBoundingClientRect();t.left<0?s.classList.remove("dropdown-menu-right"):t.right>window.innerWidth&&s.classList.add("dropdown-menu-right")})}class ye extends HTMLElement{constructor(){super(...arguments);o(this,"update",()=>{this.toggleGlobalEventListeners(),this.isConnected&&(this.query="",this.filterOptions(),this.updateSummary(),this.open?this.inputElement.focus():this.sortOptions())});o(this,"updateSummary",()=>{this.summary=this.open||this.selectedOptionCount?this.selectedOptionSummary:""});o(this,"filterOptions",()=>{const{options:e,query:i}=this;for(const n of e)n.hidden=i&&!$t(i,this.labelForOption(n));this.toggleAttribute("no-results",i&&e.every(n=>n.hidden))});o(this,"closeOnClickOutside",e=>{this.contains(e.target)||(this.open=!1)});o(this,"closeOnFocusOutside",e=>{this.contains(e.target)||(this.open=!1)});o(this,"closeOnEscapeKey",e=>{e.key=="Escape"&&(this.open=!1,this.contains(e.target)&&this.summaryElement.focus())});o(this,"sortOptions",()=>this.listElement.replaceChildren(...this.options.sort(this.compareOptions)));o(this,"compareOptions",(e,i)=>this.sortStringForOption(e).localeCompare(this.sortStringForOption(i)));o(this,"sortStringForOption",e=>`${this.optionIsSelected(e)?0:1}${this.labelForOption(e)}`);o(this,"optionIsSelected",e=>Boolean(e.querySelector(":checked")));o(this,"labelForOption",e=>e.getAttribute("data-label")||e.textContent)}connectedCallback(){this.detailsElement=this.querySelector("details"),this.summaryElement=this.querySelector("summary"),this.inputElement=this.querySelector("input[type=search]"),this.listElement=this.querySelector("ul,ol"),this.detailsElement.addEventListener("toggle",this.update),this.inputElement.addEventListener("input",this.filterOptions),this.listElement.addEventListener("change",this.updateSummary),this.update()}disconnectedCallback(){this.detailsElement.removeEventListener("toggle",this.update),this.inputElement.removeEventListener("input",this.filterOptions),this.listElement.removeEventListener("change",this.updateSummary),this.update()}toggleGlobalEventListeners(){const e=this.open&&this.isConnected?"add":"remove";window[`${e}EventListener`]("click",this.closeOnClickOutside),window[`${e}EventListener`]("focusin",this.closeOnFocusOutside),window[`${e}EventListener`]("keydown",this.closeOnEscapeKey)}get open(){return this.detailsElement.open}set open(e){this.detailsElement.open=e}get query(){return this.inputElement.value}set query(e){this.inputElement.value=e}set summary(e){this.summaryElement.textContent=e}get selectedOptionSummary(){const e=this.selectedOptionCount;return`${e} ${e==1?this.optionDescriptionSingular:this.optionDescriptionPlural}`}get selectedOptionCount(){return this.listElement.querySelectorAll(":checked").length}get selectedOptions(){return this.options.filter(this.optionIsSelected)}get options(){return[...this.listElement.querySelectorAll("[role=option]")]}get optionDescriptionSingular(){return this.getAttribute("option-description-singular")}get optionDescriptionPlural(){return this.getAttribute("option-description-plural")}}customElements.define("multi-select",ye);class Te extends HTMLElement{show(){this.isVisible=!0,this.hide(3e3)}hide(t){setTimeout(()=>{this.isVisible=!1},t),setTimeout(()=>{this.remove()},t+1e3)}get isVisible(){return this.getAttribute("data-visible")||!1}set isVisible(t){this.setAttribute("data-visible",t)}connectedCallback(){this.show()}}customElements.define("toast-notification",Te);class we extends HTMLElement{listen(){this.mediaQuery.addEventListener("change",t=>{this.update(t.matches)})}update(t){t?(this.details.open=!1,this.summary.tabIndex=0):(this.details.open=!0,this.summary.tabIndex=-1)}connectedCallback(){this.details=this.querySelector(":scope > details"),this.summary=this.querySelector(":scope > details > summary"),this.mediaQuery=window.matchMedia("(max-width: 1023px)"),this.update(this.mediaQuery.matches),this.listen()}}window.customElements.define("side-pane",we);addEventListener("load",()=>{let s=!1;const t=()=>{s=!0,document.documentElement.toggleAttribute("data-chat-ready",!0)};window.HubSpotConversations?t():window.hsConversationsOnReady=[t],setTimeout(()=>{s||document.documentElement.toggleAttribute("data-chat-unavailable",!0)},5e3)});window.hsConversationsSettings={inlineEmbedSelector:"[data-hs-chat]",loadImmediately:!1};p(function(){document.querySelectorAll("a.toggle-nlp-summary").forEach(function(s){s.addEventListener("click",function(t){console.log("hethere"),t.preventDefault(),document.querySelectorAll(".nlp-summary").forEach(function(e){e.classList.toggle("hidden")})})})});function mt(){return window.location.pathname}window.addEventListener("submit",Ct,{capture:!0});window.addEventListener("pageshow",function(){kt(mt(),{storage:window.localStorage})});window.addEventListener("pagehide",function(){St(mt(),{storage:window.localStorage})});export{w as c,_ as m};
//# sourceMappingURL=application.0d6c4a7d.js.map
